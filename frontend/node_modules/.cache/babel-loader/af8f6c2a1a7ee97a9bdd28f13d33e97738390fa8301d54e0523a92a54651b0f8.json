{"ast":null,"code":"import React,{useState}from'react';import{reviewAPI}from'../services/api';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewCard=_ref=>{var _review$userId,_review$userId2;let{review,onDelete,onUpdate}=_ref;const{user}=useAuth();const[helpful,setHelpful]=useState(review.helpfulCount||0);const[marked,setMarked]=useState(false);const handleMarkHelpful=async()=>{if(marked)return;try{const response=await reviewAPI.markHelpful(review._id);setHelpful(response.data.helpfulCount);setMarked(true);}catch(error){console.error('Error marking helpful:',error);}};const formatDate=date=>{return new Date(date).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});};const renderStars=rating=>{return'‚≠ê'.repeat(rating)+'‚òÜ'.repeat(5-rating);};const isOwner=user&&((_review$userId=review.userId)===null||_review$userId===void 0?void 0:_review$userId._id)===user.id;return/*#__PURE__*/_jsxs(\"div\",{className:\"review-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"review-user\",children:((_review$userId2=review.userId)===null||_review$userId2===void 0?void 0:_review$userId2.username)||'Anonymous'}),review.verifiedPurchase&&/*#__PURE__*/_jsx(\"span\",{className:\"verified-badge\",children:\"Verified Purchase\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"review-date\",children:formatDate(review.createdAt)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"review-rating\",children:renderStars(review.rating)}),/*#__PURE__*/_jsx(\"p\",{className:\"review-text\",children:review.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-between mt-20\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleMarkHelpful,className:\"btn btn-secondary\",disabled:marked,children:[\"\\uD83D\\uDC4D Helpful (\",helpful,\")\"]}),isOwner&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onUpdate(review),className:\"btn btn-secondary\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(review._id),className:\"btn btn-danger\",children:\"Delete\"})]})]})]});};export default ReviewCard;","map":{"version":3,"names":["React","useState","reviewAPI","useAuth","jsx","_jsx","jsxs","_jsxs","ReviewCard","_ref","_review$userId","_review$userId2","review","onDelete","onUpdate","user","helpful","setHelpful","helpfulCount","marked","setMarked","handleMarkHelpful","response","markHelpful","_id","data","error","console","formatDate","date","Date","toLocaleDateString","year","month","day","renderStars","rating","repeat","isOwner","userId","id","className","children","username","verifiedPurchase","createdAt","text","onClick","disabled"],"sources":["C:/Users/Suren/Desktop/ClaudeApp/frontend/src/components/ReviewCard.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { reviewAPI } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ReviewCard = ({ review, onDelete, onUpdate }) => {\r\n  const { user } = useAuth();\r\n  const [helpful, setHelpful] = useState(review.helpfulCount || 0);\r\n  const [marked, setMarked] = useState(false);\r\n\r\n  const handleMarkHelpful = async () => {\r\n    if (marked) return;\r\n\r\n    try {\r\n      const response = await reviewAPI.markHelpful(review._id);\r\n      setHelpful(response.data.helpfulCount);\r\n      setMarked(true);\r\n    } catch (error) {\r\n      console.error('Error marking helpful:', error);\r\n    }\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Date(date).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  const renderStars = (rating) => {\r\n    return '‚≠ê'.repeat(rating) + '‚òÜ'.repeat(5 - rating);\r\n  };\r\n\r\n  const isOwner = user && review.userId?._id === user.id;\r\n\r\n  return (\r\n    <div className=\"review-card\">\r\n      <div className=\"review-header\">\r\n        <div>\r\n          <span className=\"review-user\">\r\n            {review.userId?.username || 'Anonymous'}\r\n          </span>\r\n          {review.verifiedPurchase && (\r\n            <span className=\"verified-badge\">Verified Purchase</span>\r\n          )}\r\n        </div>\r\n        <span className=\"review-date\">{formatDate(review.createdAt)}</span>\r\n      </div>\r\n\r\n      <div className=\"review-rating\">{renderStars(review.rating)}</div>\r\n\r\n      <p className=\"review-text\">{review.text}</p>\r\n\r\n      <div className=\"flex-between mt-20\">\r\n        <button\r\n          onClick={handleMarkHelpful}\r\n          className=\"btn btn-secondary\"\r\n          disabled={marked}\r\n        >\r\n          üëç Helpful ({helpful})\r\n        </button>\r\n\r\n        {isOwner && (\r\n          <div className=\"flex gap-10\">\r\n            <button onClick={() => onUpdate(review)} className=\"btn btn-secondary\">\r\n              Edit\r\n            </button>\r\n            <button onClick={() => onDelete(review._id)} className=\"btn btn-danger\">\r\n              Delete\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReviewCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}