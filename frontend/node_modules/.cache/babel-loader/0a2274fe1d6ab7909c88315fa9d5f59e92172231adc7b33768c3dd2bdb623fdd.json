{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{productAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchBar=()=>{const[query,setQuery]=useState('');const[suggestions,setSuggestions]=useState([]);const[showSuggestions,setShowSuggestions]=useState(false);const navigate=useNavigate();const searchRef=useRef(null);useEffect(()=>{const handleClickOutside=event=>{if(searchRef.current&&!searchRef.current.contains(event.target)){setShowSuggestions(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);useEffect(()=>{const fetchSuggestions=async()=>{if(query.length<2){setSuggestions([]);return;}try{const response=await productAPI.searchSuggestions(query);setSuggestions(response.data);setShowSuggestions(true);}catch(error){console.error('Error fetching suggestions:',error);}};const debounce=setTimeout(fetchSuggestions,300);return()=>clearTimeout(debounce);},[query]);const handleSearch=function(){let searchQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:query;if(searchQuery.trim()){navigate(\"/products?search=\".concat(encodeURIComponent(searchQuery)));setShowSuggestions(false);setQuery('');}};const handleSuggestionClick=suggestion=>{setQuery(suggestion);handleSearch(suggestion);};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",ref:searchRef,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Search products...\",value:query,onChange:e=>setQuery(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSearch()}),/*#__PURE__*/_jsx(\"button\",{className:\"search-btn\",onClick:()=>handleSearch(),children:\"\\uD83D\\uDD0D\"}),showSuggestions&&suggestions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"suggestions\",children:suggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-item\",onClick:()=>handleSuggestionClick(suggestion),children:suggestion},index))})]});};export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","productAPI","jsx","_jsx","jsxs","_jsxs","SearchBar","query","setQuery","suggestions","setSuggestions","showSuggestions","setShowSuggestions","navigate","searchRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","fetchSuggestions","length","response","searchSuggestions","data","error","console","debounce","setTimeout","clearTimeout","handleSearch","searchQuery","arguments","undefined","trim","concat","encodeURIComponent","handleSuggestionClick","suggestion","className","ref","children","type","placeholder","value","onChange","e","onKeyPress","key","onClick","map","index"],"sources":["C:/Users/Suren/Desktop/ClaudeApp/frontend/src/components/SearchBar.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { productAPI } from '../services/api';\r\n\r\nconst SearchBar = () => {\r\n  const [query, setQuery] = useState('');\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const navigate = useNavigate();\r\n  const searchRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\r\n        setShowSuggestions(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchSuggestions = async () => {\r\n      if (query.length < 2) {\r\n        setSuggestions([]);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await productAPI.searchSuggestions(query);\r\n        setSuggestions(response.data);\r\n        setShowSuggestions(true);\r\n      } catch (error) {\r\n        console.error('Error fetching suggestions:', error);\r\n      }\r\n    };\r\n\r\n    const debounce = setTimeout(fetchSuggestions, 300);\r\n    return () => clearTimeout(debounce);\r\n  }, [query]);\r\n\r\n  const handleSearch = (searchQuery = query) => {\r\n    if (searchQuery.trim()) {\r\n      navigate(`/products?search=${encodeURIComponent(searchQuery)}`);\r\n      setShowSuggestions(false);\r\n      setQuery('');\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion) => {\r\n    setQuery(suggestion);\r\n    handleSearch(suggestion);\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-bar\" ref={searchRef}>\r\n      <input\r\n        type=\"text\"\r\n        className=\"search-input\"\r\n        placeholder=\"Search products...\"\r\n        value={query}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n        onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\r\n      />\r\n      <button className=\"search-btn\" onClick={() => handleSearch()}>\r\n        üîç\r\n      </button>\r\n\r\n      {showSuggestions && suggestions.length > 0 && (\r\n        <div className=\"suggestions\">\r\n          {suggestions.map((suggestion, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"suggestion-item\"\r\n              onClick={() => handleSuggestionClick(suggestion)}\r\n            >\r\n              {suggestion}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBar;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,UAAU,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7C,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACc,eAAe,CAAEC,kBAAkB,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAAgB,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAc,SAAS,CAAGf,MAAM,CAAC,IAAI,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIF,SAAS,CAACG,OAAO,EAAI,CAACH,SAAS,CAACG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CAClEP,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,CAEDQ,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAMK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC5E,CAAC,CAAE,EAAE,CAAC,CAENjB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAyB,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAIhB,KAAK,CAACiB,MAAM,CAAG,CAAC,CAAE,CACpBd,cAAc,CAAC,EAAE,CAAC,CAClB,OACF,CAEA,GAAI,CACF,KAAM,CAAAe,QAAQ,CAAG,KAAM,CAAAxB,UAAU,CAACyB,iBAAiB,CAACnB,KAAK,CAAC,CAC1DG,cAAc,CAACe,QAAQ,CAACE,IAAI,CAAC,CAC7Bf,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAE,MAAOgB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAED,KAAM,CAAAE,QAAQ,CAAGC,UAAU,CAACR,gBAAgB,CAAE,GAAG,CAAC,CAClD,MAAO,IAAMS,YAAY,CAACF,QAAQ,CAAC,CACrC,CAAC,CAAE,CAACvB,KAAK,CAAC,CAAC,CAEX,KAAM,CAAA0B,YAAY,CAAG,QAAAA,CAAA,CAAyB,IAAxB,CAAAC,WAAW,CAAAC,SAAA,CAAAX,MAAA,IAAAW,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG5B,KAAK,CACvC,GAAI2B,WAAW,CAACG,IAAI,CAAC,CAAC,CAAE,CACtBxB,QAAQ,qBAAAyB,MAAA,CAAqBC,kBAAkB,CAACL,WAAW,CAAC,CAAE,CAAC,CAC/DtB,kBAAkB,CAAC,KAAK,CAAC,CACzBJ,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAAC,CAED,KAAM,CAAAgC,qBAAqB,CAAIC,UAAU,EAAK,CAC5CjC,QAAQ,CAACiC,UAAU,CAAC,CACpBR,YAAY,CAACQ,UAAU,CAAC,CAC1B,CAAC,CAED,mBACEpC,KAAA,QAAKqC,SAAS,CAAC,YAAY,CAACC,GAAG,CAAE7B,SAAU,CAAA8B,QAAA,eACzCzC,IAAA,UACE0C,IAAI,CAAC,MAAM,CACXH,SAAS,CAAC,cAAc,CACxBI,WAAW,CAAC,oBAAoB,CAChCC,KAAK,CAAExC,KAAM,CACbyC,QAAQ,CAAGC,CAAC,EAAKzC,QAAQ,CAACyC,CAAC,CAAC9B,MAAM,CAAC4B,KAAK,CAAE,CAC1CG,UAAU,CAAGD,CAAC,EAAKA,CAAC,CAACE,GAAG,GAAK,OAAO,EAAIlB,YAAY,CAAC,CAAE,CACxD,CAAC,cACF9B,IAAA,WAAQuC,SAAS,CAAC,YAAY,CAACU,OAAO,CAAEA,CAAA,GAAMnB,YAAY,CAAC,CAAE,CAAAW,QAAA,CAAC,cAE9D,CAAQ,CAAC,CAERjC,eAAe,EAAIF,WAAW,CAACe,MAAM,CAAG,CAAC,eACxCrB,IAAA,QAAKuC,SAAS,CAAC,aAAa,CAAAE,QAAA,CACzBnC,WAAW,CAAC4C,GAAG,CAAC,CAACZ,UAAU,CAAEa,KAAK,gBACjCnD,IAAA,QAEEuC,SAAS,CAAC,iBAAiB,CAC3BU,OAAO,CAAEA,CAAA,GAAMZ,qBAAqB,CAACC,UAAU,CAAE,CAAAG,QAAA,CAEhDH,UAAU,EAJNa,KAKF,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhD,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}